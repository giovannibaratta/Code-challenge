language: minimal
os: linux
dist: bionic
python:
- 3.7
- pypy3
branches:
  only:
  - master
env:
  global:
  - ROOT_PATH=$TRAVIS_BUILD_DIR
  - ANSIBLE_VERSION='2.9.7*'
  - "$( which python3 )"
before_install:
- openssl aes-256-cbc -K $encrypted_c9d8d7831778_key -iv $encrypted_c9d8d7831778_iv
  -in docker_nodes.pem.enc -out docker_nodes.pem -d
- openssl aes-256-cbc -K $encrypted_8b859042e126_key -iv $encrypted_8b859042e126_iv
  -in ansible_controller.pem.enc -out ansible_controller.pem -d

install:
- ci/scripts/install_dependencies.sh
before_script:
- ci/scripts/yamllint.sh
- ci/scripts/ansible_lint.sh
deploy:
- aws/scripts/deploy_network.sh
- aws/scripts/deploy_ec2.sh
- aws/scripts/configure_ansible_controller.sh
- aws/scripts/launch_docker_configuration.sh
